<html>

<head>
    <link rel="stylesheet" type="text/css" href="account_page.css">
    <title>Account Homepage</title>
    <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
</head>

<body>

    <h1>Account Homepage</h1>

    <script>
        // alert(document.cookie);
        var testCookie = document.cookie;
        var partsOfCookie = testCookie.split(',');
        // alert(partsOfCookie[1]);
        var dummyUser = ({
            UserID: partsOfCookie[0],
            UserName: partsOfCookie[1],
            Picture: null,
            Birthday_year: partsOfCookie[2],
            Birthday_month: partsOfCookie[3],
            Birthday_day: partsOfCookie[4],
            Gender: partsOfCookie[5],
            GenderInto: partsOfCookie[6],
            Location: null,
            InARelationship: false
        });
    </script>

    <div>
        <label>User Name</br></label>
        <label id="UserName"></label>
        <script>
            document.getElementById("UserName").innerHTML = dummyUser.UserName;
        </script>
    </div>

    <div>
        <label>Birthday</br></label>
        <label id="Birthday"></label>
        <script>
            document.getElementById("Birthday").innerHTML = dummyUser.Birthday_month + "/" + dummyUser.Birthday_day + "/" + dummyUser.Birthday_year;
        </script>
    </div>

    <div>
        <label>Gender</br></label>
        <label id="Gender"></label>
        <script>
            document.getElementById("Gender").innerHTML = dummyUser.Gender;
        </script>
    </div>

    <div>
        <label>Gender Interested In</br></label>
        <label id="GenderInto"></label>
        <script>
            document.getElementById("GenderInto").innerHTML = dummyUser.GenderInto;
        </script>
    </div>



    <form id="getMatches">

        <button type="submit">Matches</button>

        <script>
            $("#getMatches").submit(function(event) {

                event.preventDefault();

                var $getMatches = $(this),
                    UserID1 = dummyUser.UserID;

                var getting = $.get("/BackEnd/getMatches/", {
                        UserID1: UserID1
                    })
                    // location.replace('/matches.html');
                    // alert("going to matches");
                getting.done(function(data) {
                    // location.replace('/matches.html');
                    alert(data[0].UserName);
                    if (data[0].UserID != null) {
                        alert("userID not null");
                        i = 0;
                        while (data[i] != null) {
                            document.cookie = testCookie + "," + data[i];
                            i++;
                        }
                        alert("all users added");
                        // alert(data[i]);
                        location.replace('/matches.html');
                    } else if (data.Error === -2)
                        alert("Sorry, server issues");
                    else {
                        alert("No Matches");
                    }
                });
            });
        </script>

    </form>


    <form id="logout">

        <button type="submit">Logout</button>

        <script>
            $("#logout").submit(function(event) {
                alert("logging out");
                event.preventDefault();
                // document.cookie("testCookie", null);
                //document.removeCookie("testCookie");

                testCookie = null;
                document.cookie = null;
                alert("cookie removed");
                if (testCookie != null) {
                    alert("logout failed");
                } else {
                    location.replace('/index.html');
                }
            });
        </script>

    </form>

    <div class="container" style="background-color:#f1f1f1">
        <span class="newact"> <a href="/edit_account_info.htm">Edit Account Information</a></span>

    </div>


</body>


<script>
    var delete_cookie = function(name) {
        document.cookie = name + '=;expires=Thu, 01 Jan 1970 00:00:01 GMT;';
    };
</script>



</html>