<html>

<head>
    <link rel="stylesheet" type="text/css" href="create_account.css">
    <title>Create an Account</title>
    <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
</head>

<body>

    <h1>Create a new Account</h1>

    <form onsubmit="return passWordsMatch">
        <div class="container">
            <label><b>Username</b></label>
            <input id="userName" type="text" placeholder="Enter Username" name="UserName" required>

            <label><b>Password</b></label>
            <input id="pass1" type="password" placeholder="Enter Password" name="Password" required>

            <label><b>Re-enter Password</b></label>
            <input id="pass2" type="password" placeholder="Enter Same Password" required>

            <script>
                function passWordsMatch() {
                    var pass1 = document.getElementById("pass1").value;
                    var pass2 = document.getElementById("pass2").value;
                    var ok = true;
                    if (pass1 != pass2) {
                        //alert("Passwords Do not match");
                        document.getElementById("pass1").style.borderColor = "#E34234";
                        document.getElementById("pass2").style.borderColor = "#E34234";
                        ok = false;
                    } else {
                        // alert("Passwords Match!!!");
                    }
                    return ok;
                }

                $("form").submit(function(event) {

                    event.preventDefault();

                    if (document.getElementById('Gender0').checked) {
                        Gender = document.getElementById('Gender0').value;
                    } else if (document.getElementById('Gender1').checked) {
                        Gender = document.getElementById('Gender1').value;
                    } else {
                        Gender = document.getElementById('Gender2').value;
                    }

                    if (document.getElementById('GenderInto0').checked) {
                        GenderInto = document.getElementById('GenderInto0').value;
                    } else if (document.getElementById('GenderInto1').checked) {
                        GenderInto = document.getElementById('GenderInto1').value;
                    } else {
                        GenderInto = document.getElementById('GenderInto').value;
                    }

                    var $form = $(this),
                        UserName = document.getElementById("userName").value,
                        Password = document.getElementById("pass1").value,
                        Birthday = document.getElementById("Birthday").value,
                        Gender,
                        GenderInto,
                        minAge = document.getElementById("minAge").value,
                        maxAge = document.getElementById("maxAge").value;

                    var posting = $.post("/BackEnd/createUser/", {
                        UserName: UserName,
                        Password: Password,
                        Password: Password,
                        Birthday: Birthday,
                        Gender: Gender,
                        GenderInto: GenderInto,
                        minAge: minAge,
                        maxAge: maxAge
                    });
                    alert("posted to server");

                    posting.done(function(data) {
                        alert("ID is " + data.UserID);
                        // obj = jQuery.parseJSON(data);
                        if (data.UserID != null) {
                            // alert("userID not null");
                            document.cookie = data.UserID + "," + data.UserName + "," + data.Birthday + "," + data.Gender + "," + data.GenderInto + "," + "path=/";
                            location.replace('/account_page.htm');

                        } else {
                            if (data.Error === -1)
                                alert("Username is taken, Sorry ='(");
                            else if (data.Error === -2)
                                alert("Sorry, server issues");
                        }
                    });
                });
            </script>

            <label><b>Birthday (MM/DD/YYYY) </b></label>
            <input id="Birthday" type="text" placeholder="Enter Birthdate" name="Birthday" required>

            <label><b>Gender (M, F, or Other)</b></label>

            <div>
                <label>
                <input id="Gender0" type="radio" name="Gender"  value="M" checked/>Male</label>
                <label>
                <input id="Gender1" type="radio" name="Gender"  value="F" />Female</label>
                <label>
                <input id="Gender2" type="radio" name="Gender"  value="MF" />Other</label>

            </div>

            <label><b>Gender Interested In</b></label>


            <div>
                <label>
                <input id="GenderInto0" type="radio" name="GenderInto" value="M" />Male</label>
                <label>
                <input id="GenderInto1" type="radio" name="GenderInto" value="F" checked/>Female</label>
                <label>
                <input id="GenderInto2" type="radio" name="GenderInto" value="MF" />Other</label>

            </div>


            <label><b>Age Range Interested In</b></label>

            <div>
                <label>
                <input id="minAge" type="number" name="minAge" placeholder="Minimum Match Age"/></label>
                <input id="maxAge" type="number" name="maxAge" placeholder="Maximum Match Age" /></label>
            </div>
            <label><b>Location (Optional)</b></label>
            <input type="text" placeholder="Enter Location" name="loc">

            <button type="submit">Login</button>

        </div>

    </form>


</body>

</html>