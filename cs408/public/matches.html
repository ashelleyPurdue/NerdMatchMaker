<html>

<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js"></script>

<head>
    <link rel="stylesheet" type="text/css" href="matches.css">
    <title>Matches</title>
</head>

<body>

    <h1>Matches</h1>

    <!--<div id="block">
        <form id="blockUserDiv" name="block">


        </form>
    </div>-->

    <script>
        // alert(document.cookie);
        var testCookie = document.cookie;
        var partsOfCookie = testCookie.split(',');
        // alert(partsOfCookie[1]);
        var dummyUser = ({
            UserID: partsOfCookie[0], //partsOfCookie[0],
            UserName: partsOfCookie[1] //partsOfCookie[1]
        });


        $.ajax({
            type: 'GET',
            url: '/BackEnd/getMatches/',
            data: {
                UserID1: dummyUser.UserID
            },
            success: function(data, status) {
                for (var i = 0; i < data.length; i++) {
                    $temp = $('<form>', {});
                    $temp.append('<button><input type = "submit" value = "UserName:+' + data[i].UserName + ' "></button>');
                    $temp.append('<input type = "hidden" name = "UserID" value = ' + data[i].UserID + '>');
                    $temp.appendTo(document.body);
                    $temp.submit(function(event) {
						var text = $(this).find('input[name="UserID"]').val();
                        alert( text);
						event.preventDefault();
             			var posting = $.post("/BackEnd/blockUser/", {
                 			UserID1: dummyUser.UserID,
                 			UserID2: text
             			});
						return false;
                    });


                    /*$("#divUser").append("<h1>" + data[i].UserID +"</h1>");

                    var currentDiv = document.getElementById("divUser");
                    document.body.insertBefore(newDiv, currentDiv);

                    $form.submit(function(event) {
                        alert("called");
                        var user = document.getElementsByName("blockedUser");
                        alert("blocking user " + user[0].value);
                        var blockedU = user[0].value;
                        event.preventDefault();

                        var $blockUser = $(this),
                            UserID1: dummyUser.UserID,
                            UserID2: text;

                        var posting = $.post("/BackEnd/blockUser/", {
                            UserID1: UserID1,
                            UserID2: UserID2
                        });

                        posting.done(function(data) {
                            alert("blocked");
                        });


                    });

                }
                // document.body.removeChild(blockForm);
            }
        });

        /*$('#blockUserDiv0').submit(function(event) {
            alert("called");
            var user = document.getElementsByName("blockedUser");
            alert("blocking user " + user[0].value);
            var blockedU = user[0].value;
            event.preventDefault();

            var $blockUser = $(this),
                UserID1: dummyUser.UserID,
                UserID2: blockedU;

            var posting = $.post("/BackEnd/blockUser/", {
                UserID1: UserID1,
                UserID2: UserID2
            });

            posting.done(function(data) {
                alert("blocked");
            });
        });*/
    </script>








    <!--
</body>

<div class="container" style="background-color:#f1f1f1">
    <span class="newact"> <a href="/edit_account_info.htm">Edit Account Information</a></span>
</div>-->



</html>